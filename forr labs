&НаКлиенте
Процедура СотрудникПриИзменении(Элемент)
    
    // Когда выбираем сотрудника, автоматически ставим его оклад
    Если Сотрудник <> Неопределено Тогда
        Начислено = Сотрудник.Оклад;
    Иначе
        Начислено = 0;
        Налог = 0;
    КонецЕсли;
    
    // Всегда вызываем расчет, даже если оклад = 0
    НачисленоПриИзменении(Элемент);
    
КонецПроцедуры

&НаКлиенте
Процедура НачисленоПриИзменении(Элемент)
    
    // Проверяем, что сотрудник выбран
    Если Сотрудник = Неопределено Тогда
        Налог = 0;
        Возврат;
    КонецЕсли;
    
    // Проверяем, что сумма указана и положительная
    Если Начислено <= 0 Тогда
        Налог = 0;
        Возврат;
    КонецЕсли;
    
    // Проверяем, что ставка налога указана
    Если Сотрудник.НалоговаяСтавка = 0 Тогда
        Налог = 0;
        Возврат;
    КонецЕсли;
    
    // Рассчитываем налог
    Ставка = Сотрудник.НалоговаяСтавка;
    СуммаНалога = Начислено * Ставка / 100;
    СуммаНалога = Окр(СуммаНалога, 2);
    
    // Устанавливаем рассчитанный налог
    Налог = СуммаНалога;
    
КонецПроцедуры